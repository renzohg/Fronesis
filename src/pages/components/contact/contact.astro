---
import "./_contact.css";
---
<section class="quotation-section">
    <div class="header-content">
        <div class="conteiner-main-title">
            <h1 class="main-title">Solicita tu</h1>
            <h1 class="main-title"><span class="accent-title-span">Cotización</span></h1>
        </div>
    
        <p class="subtitle">
            Cuéntanos sobre tu proyecto y te enviaremos una propuesta personalizada
        </p>
        <div class="response-time-badges">
            <span class="badgee">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-clock-hour-4"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"></path><path d="M12 12l3 2"></path><path d="M12 7v5"></path></svg>
                Respuesta rápida
            </span>
            <span class="badgee">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-mail"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z"></path><path d="M3 7l9 6l9 -6"></path></svg>
                Sin compromiso
            </span>
        </div>
    </div>

    <div class="form-container">
        <form class="contact-form" id="contact-form" action="https://formspree.io/f/mjkazkbr" method="POST">
            <h2 class="form-title">Formulario de Contacto</h2>
            <p class="form-instruction">
                Completa el formulario y nos pondremos en contacto contigo
            </p>
            <hr class="divider">

            <section class="form-section">
                <h3 class="section-title">INFORMACIÓN DE CONTACTO</h3>
                <div class="form-group-grid">
                    <div class="input-group">
                        <label for="name">NOMBRE <span class="required">*</span></label>
                        <input type="text" id="name" name="name" placeholder="Tu nombre" required>
                    </div>
                    <div class="input-group">
                        <label for="email">EMAIL <span class="required">*</span></label>
                        <input type="email" id="email" name="email" placeholder="tucorreo@ejemplo.com" required>
                    </div>
                </div>
            </section>

            <section class="form-section">
                <h3 class="section-title">TU PROYECTO</h3>
                <div class="input-group">
                    <label for="project-type">TIPO DE PROYECTO <span class="required">*</span></label>
                    <div class="select-wrapper">
                        <select id="project-type" name="project-type" required>
                            <option value="" disabled selected>Selecciona una opción</option>
                            <option value="simple-web">Página Web Simple</option>
                            <option value="complete-web">Sitio Web Completo</option>
                            <option value="online-store">Tienda Online</option>
                            <option value="redesign">Rediseño de Sitio</option>
                            <option value="other">Otro</option>
                        </select>
                    </div>
                </div>

                <h3 class="section-title">CUÉNTANOS SOBRE EL PROYECTO <span class="required">*</span></h3>
                <div class="input-group">
                    <textarea id="project-description" name="message" rows="4" placeholder="Describe tu proyecto lo que buscas alcanzar..." required></textarea>
                </div>
            </section>

            <button type="submit" class="cta-button">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z"></path><path d="M3 7l9 6l9 -6"></path></svg>
                ENVIAR MENSAJE
            </button>

            <p class="privacy-note">
                Nos pondremos en contacto contigo lo antes posible
            </p>
        </form>

        <!-- Mensaje de éxito -->
        <p id="form-success" style="display:none; color: green; margin-top: 1rem;">¡Mensaje enviado con éxito!</p>
    </div>

    <script>
        const form = document.getElementById('contact-form');
        const successMsg = document.getElementById('form-success');

        if (form instanceof HTMLFormElement) {
            form.addEventListener('submit', async function(e) {
                e.preventDefault(); // evita la redirección

                const formData = new FormData(form);

                try {
                    const response = await fetch(form.action, {
                        method: form.method,
                        body: formData,
                        headers: {
                            'Accept': 'application/json'
                        }
                    });

                    if (response.ok) {
                        if (successMsg instanceof HTMLElement) {
                            successMsg.style.display = 'block';
                        }
                        form.reset();
                    } else {
                        alert('Hubo un error, por favor intenta de nuevo.');
                    }
                } catch (error) {
                    alert('Hubo un error, por favor intenta de nuevo.');
                }
            });
        } else {
            console.warn('Contact form not found on this page.');
        }
    </script>
</section>
