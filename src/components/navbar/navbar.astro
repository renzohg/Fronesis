---
import "./_navbar.css";
---

<header class="navbar">
  <div class="navbar-container">
    <div class="logo" id="fronesis-logo">
      <a href="#" aria-label="Ir al inicio">FRÓNESIS</a>
    </div>

    <button class="hamburger" id="hamburger">
      <span></span>
      <span></span>
      <span></span>
    </button>

    <nav class="nav-links" id="nav-links">
      <a href="#header_id">INICIO</a>
      <a href="#servicios">SERVICIOS</a>
      <a href="#nosotros">NOSOTROS</a>
      <a href="#contacto">CONTACTO</a>
    </nav>

    <button class="theme-toggle" id="theme-toggle">
      <img src="/sun.svg" alt="Tema claro" id="theme-icon" />
    </button>
  </div>

<script>
  const hamburger = document.getElementById("hamburger");
  const navLinks = document.getElementById("nav-links");
  const themeToggle = document.getElementById("theme-toggle");
  const themeIcon = document.getElementById("theme-icon") as HTMLImageElement | null;
  const root = document.documentElement;

  // === CARGAR TEMA GUARDADO AL INICIO ===
  const savedTheme = localStorage.getItem("theme");
  let isDark = savedTheme === "dark";

  // Aplicar tema guardado (o detectar preferencia del sistema)
  if (!savedTheme) {
    isDark = window.matchMedia("(prefers-color-scheme: dark)").matches;
  }

  root.setAttribute("data-theme", isDark ? "dark" : "light");
  if (themeIcon) {
    themeIcon.src = isDark ? "/moon.svg" : "/sun.svg";
    themeIcon.alt = isDark ? "Tema oscuro" : "Tema claro";
  }

  // === CAMBIAR TEMA AL HACER CLIC ===
  if (themeToggle && themeIcon) {
    themeToggle.addEventListener("click", () => {
      isDark = !isDark;
      root.setAttribute("data-theme", isDark ? "dark" : "light");
      themeIcon.src = isDark ? "/moon.svg" : "/sun.svg";
      themeIcon.alt = isDark ? "Tema oscuro" : "Tema claro";

      // GUARDAR EN LOCALSTORAGE
      localStorage.setItem("theme", isDark ? "dark" : "light");
    });
  }

  // === MENÚ HAMBURGUESA (sin cambios) ===
  if (hamburger && navLinks) {
    hamburger.addEventListener("click", () => {
      hamburger.classList.toggle("active");
      navLinks.classList.toggle("open");
    });
  }

  if (navLinks && hamburger) {
    const navItems = navLinks.querySelectorAll("a, button");
    navItems.forEach(item => {
      item.addEventListener("click", () => {
        if (navLinks.classList.contains("open")) {
          navLinks.classList.remove("open");
          hamburger.classList.remove("active");
        }
      });
    });
  }
</script>
</header>