---
import "./_aboutfronesis.css";
---

<section class="timeline-section" id="nosotros">
  <div class="timeline-container">
    <h2 class="timeline-title">
      Cómo <span class="titulo-acento">Trabajamos</span>
    </h2>

    <div class="timeline">
      <div class="timeline-line"></div>

      <div class="timeline-item left" data-step="1">
        <div class="timeline-content">
          <div class="timeline-number">1</div>
          <h3>Conversación Inicial</h3>
          <p>Te escuchamos. Entendemos tu negocio, objetivos y visión.</p>
        </div>
        <div class="timeline-dot"></div>
      </div>

      <div class="timeline-item right" data-step="2">
        <div class="timeline-dot"></div>
        <div class="timeline-content">
          <div class="timeline-number">2</div>
          <h3>Planificación</h3>
          <p>Definimos estructura, funcionalidades y cronograma.</p>
        </div>
      </div>

      <div class="timeline-item left" data-step="3">
        <div class="timeline-content">
          <div class="timeline-number">3</div>
          <h3>Diseño Visual</h3>
          <p>Creamos un diseño moderno, limpio y adaptado a tu marca.</p>
        </div>
        <div class="timeline-dot"></div>
      </div>

      <div class="timeline-item right" data-step="4">
        <div class="timeline-dot"></div>
        <div class="timeline-content">
          <div class="timeline-number">4</div>
          <h3>Desarrollo Técnico</h3>
          <p>Código limpio, rápido y optimizado para todos los dispositivos.</p>
        </div>
      </div>

      <div class="timeline-item left" data-step="5">
        <div class="timeline-content">
          <div class="timeline-number">5</div>
          <h3>Pruebas y Ajustes</h3>
          <p>Revisamos todo: velocidad, compatibilidad y experiencia.</p>
        </div>
        <div class="timeline-dot"></div>
      </div>

      <div class="timeline-item right" data-step="6">
        <div class="timeline-dot"></div>
        <div class="timeline-content">
          <div class="timeline-number">6</div>
          <h3>Entrega y Soporte</h3>
          <p>Tu web lista. Con capacitación y soporte post-lanzamiento.</p>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const items = document.querySelectorAll('.timeline-item');
    const line = document.querySelector('.timeline-line');

    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            const step = Number((entry.target as HTMLElement).dataset.step);
            setTimeout(() => {
              entry.target.classList.add('is-visible');
            }, step * 100);

            if (line) {
              const progress = (step / 6) * 100;
              (line as HTMLElement).style.height = progress + '%';
            }

            observer.unobserve(entry.target);
          }
        });
      },
      { 
        threshold: 0.12,               
        rootMargin: '0px 0px -10% 0px' 
      }
    );

    items.forEach(item => observer.observe(item));
  });
</script>
